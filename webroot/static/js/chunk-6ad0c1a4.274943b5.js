(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ad0c1a4"],{"48a7":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,sm:24,md:24}},[s("h4",[e._v("在线升级")])])],1),e._v(" "),s("el-row",{staticStyle:{"margin-left":"20px"}},[s("el-col",{attrs:{xs:24,sm:24,md:24}},[s("p",[e._v("当前系统版本："+e._s(e.currentSoftVer))]),e._v(" "),s("p",[e._v("最新软件版本："+e._s(e.currentSoftVer))])])],1),e._v(" "),s("el-row",{staticStyle:{"text-align":"center","margin-top":"10px"}},[s("el-col",{attrs:{xs:24,sm:12,md:12}},[s("el-button",{staticStyle:{"margin-right":"5px"},attrs:{type:"plain"},on:{click:e.upgradeSysOnline}},[e._v("在线升级系统到最新版本")])],1)],1),e._v(" "),s("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,sm:24,md:24}},[s("h4",[e._v("本地升级")])])],1),e._v(" "),s("el-row",{staticStyle:{"margin-left":"20px"}},[s("el-col",{attrs:{xs:24,sm:24,md:24}},[s("p",[e._v("请选择您要升级的系统文件")])])],1),e._v(" "),s("el-row",{staticStyle:{"text-align":"center","margin-top":"10px"}},[s("el-col",{attrs:{xs:24,sm:12,md:12}},[s("el-upload",{attrs:{"before-upload":e.beforeFile,"http-request":e.fileRequest,"show-file-list":!1,action:""}},[s("el-button",{attrs:{type:"plain"}},[e._v("导入系统升级文件")])],1)],1)],1)],1)},o=[],i=(s("7f7f"),{data:function(){return{file:null,listLoading:!0,form:{},fileList:[],filterText:"",multipleSelection:[],currentSoftVer:"",newSoftVer:""}},computed:{},created:function(){this.getCurrenVer()},methods:{getCurrenVer:function(){var e=this,t="";t="./api/v1/system/status",this.$axios({method:"get",url:t,headers:{token:this.$store.getters.token}}).then((function(t){var s=t.data;"0"===s.Code?e.currentSoftVer=s.Data.SoftVer?s.Data.SoftVer:"":"1"===s.Code?e.$message.error(s.Message):"-1"===s.Code?(e.$message.error(s.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):e.$message.error("返回未知错误，错误码："+s.Code)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t))}))},getFile:function(e){this.file=e.target.files[0],console.log(this.file)},beforeFile:function(e){var t=e.name;this.$message.success("准备上传文件"+t)},fileRequest:function(e){var t=new FormData;t.append("file",e.file);var s=this,r="";r="./api/v1/system/update",this.$axios({method:"post",url:r,data:t,headers:{token:this.$store.getters.token,"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;"0"===t.Code?s.$message.success("升级系统成功"):"1"===t.Code?s.$message.error(t.Message):"-1"===t.Code?(s.$message.error(t.Message),s.$store.dispatch("user/resetToken"),s.$router.push("/login?redirect=".concat(s.$route.fullPath))):s.$message.error("返回未知错误，错误码："+t.Code)})).catch((function(e){s.$message.error("出错了"+JSON.stringify(e))}))},handleSelectionChange:function(e){this.multipleSelection=e},contains:function(e,t){var s=e.length;while(s--)if(e[s]===t)return s;return-1},delFiles:function(){for(var e=this,t=this.multipleSelection.length,s=function(t){o={},o.ID=e.multipleSelection[t].ID,o.FileName=e.multipleSelection[t].FileName,i=e,e.$axios({method:"delete",url:"./api/v1/update/iapFile",data:o,headers:{token:e.$store.getters.token}}).then((function(e){var s=e.data;if("0"===s.Code){i.$message.success("删除文件成功，稍后可刷新查看");var r=i.contains(i.fileList,i.multipleSelection[t]);r>-1&&i.fileList.splice(r,1)}else"1"===s.Code?i.$message.error(s.Message):"-1"===s.Code?(i.$message.error(s.Message),i.$store.dispatch("user/resetToken"),i.$router.push("/login?redirect=".concat(i.$route.fullPath))):i.$message.error("返回未知错误，错误码："+s.Code)})).catch((function(e){i.$message.error("出错了"+JSON.stringify(e))}))},r=0;r<t;r++){var o,i;s(r)}this.multipleSelection=[]},upgradeSysOnline:function(){this.$message.info("升级中")},getFileList:function(){var e=this;e.listLoading=!0;var t="";t="./api/v1/update/iapFileInfo",this.$axios({method:"get",url:t,headers:{token:this.$store.getters.token}}).then((function(t){var s=t.data;"0"===s.Code?(e.fileList=s.Data.FileInfo,e.listLoading=!1):"1"===s.Code?(e.$message.error(s.Message),e.listLoading=!1):"-1"===s.Code?(e.$message.error(s.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath)),e.listLoading=!1):(e.$message.error("返回未知错误，错误码："+s.Code),e.listLoading=!1)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t)),e.listLoading=!1}))}}}),a=i,n=(s("b6e4"),s("2877")),l=Object(n["a"])(a,r,o,!1,null,null,null);t["default"]=l.exports},b6e4:function(e,t,s){"use strict";var r=s("fd04"),o=s.n(r);o.a},fd04:function(e,t,s){}}]);