(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-154b6130"],{4246:function(e,t,s){},6937:function(e,t,s){"use strict";var i=s("4246"),r=s.n(i);r.a},d8db:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-row",{directives:[{name:"show",rawName:"v-show",value:e.firstVisible,expression:"firstVisible"}],attrs:{gutter:20}},[s("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:12,md:6}},[s("el-row",{attrs:{gutter:10}})],1),e._v(" "),s("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:12,md:18}},[s("div",{staticStyle:{"margin-bottom":"20px",float:"right",display:"flex"}},[s("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:e.getAllDeviceModel}},[e._v("刷新")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.handelAddDeviceModel}},[e._v("添加")])],1)])],1),e._v(" "),s("el-row",{directives:[{name:"show",rawName:"v-show",value:e.firstVisible,expression:"firstVisible"}],attrs:{gutter:20}},e._l(e.deviceModelList,(function(t,i){return s("el-col",{key:i,attrs:{xs:24,sm:12,md:8}},[s("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-left":"10px"},attrs:{type:"text"},on:{click:function(s){return e.handleAddCustomFunction(t)}}},[e._v("自定义功能")]),e._v(" "),s("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-left":"1px"},attrs:{type:"text"}},[e._v("修改")]),e._v(" "),s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[e._v("删除")])],1),e._v(" "),s("el-row",{staticClass:"text item"},[s("el-col",{staticStyle:{"align-self":"center","padding-right":"15px","text-align":"right"},attrs:{xs:12,sm:12,md:12}},[s("span",[e._v("模型名称：")])]),e._v(" "),s("el-col",{attrs:{xs:12,sm:12,md:12}},[s("span",[e._v(e._s(t.Name))])])],1),e._v(" "),s("el-row",{staticClass:"text item"},[s("el-col",{staticStyle:{"align-self":"center","padding-right":"15px","text-align":"right"},attrs:{xs:12,sm:12,md:12}},[s("span",[e._v("说明信息：")])]),e._v(" "),s("el-col",{attrs:{xs:12,sm:12,md:12}},[s("span",[e._v(e._s(t.Explain))])])],1)],1)],1)})),1),e._v(" "),s("el-dialog",{attrs:{title:e.title,visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[s("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"150px","auto-complete":"on"}},[s("el-form-item",{attrs:{label:"设备模型标识符",prop:"TSLName"}},[s("el-input",{attrs:{disabled:"put"===e.mode},on:{input:e.inputTSLName},model:{value:e.form.TSLName,callback:function(t){e.$set(e.form,"TSLName",t)},expression:"form.TSLName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"设备模型标识符说明",prop:"TSLExplain"}},[s("el-input",{model:{value:e.form.TSLExplain,callback:function(t){e.$set(e.form,"TSLExplain",t)},expression:"form.TSLExplain"}})],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.addVisible=!1,e.form={},e.getAllDeviceModel()}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},r=[],a=(s("7f7f"),s("a481"),{filters:{statusFilter:function(e){var t={LocalSerial:"success",TcpClient:"gray",TcpServer:"danger"};return t[e]||"info"},interfaceTypeFilter:function(e){var t={LocalSerial:"本地串口",TcpClient:"Tcp客户端",TcpServer:"Tcp服务端"};return t[e]||"未知"},parityFilter:function(e){return console.log(e),"N"===e?"无校验":"J"===e?"奇校验":"O"===e?"偶校验":"未知"}},data:function(){var e=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘'，。、]/im,t=function(t,s,i){void 0===s||""===s?i(new Error("不能为空")):e.test(s)?i(new Error("不能输入特殊字符")):i()};return{form:{TSLName:"",TSLExplain:""},rules:{TSLExplain:[{required:!0,validator:t,trigger:"blur"}]},filtedData:[],listLoading:!0,filterText:"",editVisible:!1,baudRateList:[],mode:"",title:"",addVisible:!1,deviceModelList:[],activeNames:"11",firstVisible:!0,sencondVisible:!1}},created:function(){this.getAllDeviceModel(),this.InterfaceTypeList=[{id:"LocalSerial",text:"本地串口"},{id:"TcpClient",text:"Tcp客户端"}],this.templateTypeList=[{id:"1",text:"fcu200"},{id:"2",text:"fcu210"}],this.parityList=[{id:"N",text:"无校验"},{id:"J",text:"奇校验"},{id:"O",text:"偶校验"}]},methods:{getAllDeviceModel:function(){this.listLoading=!0;var e=this,t="";t="./api/v1/device/tsl",this.$axios({method:"get",url:t,headers:{token:this.$store.getters.token}}).then((function(t){var s=t.data;"0"===s.Code?(e.deviceModelList=s.Data,e.listLoading=!1,e.$message.success("获取设备模型列表成功")):"1"===s.Code?(e.$message.error(s.Message),e.listLoading=!1):"-1"===s.Code?(e.listLoading=!1,e.$message.error(s.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):(e.$message.error("返回未知错误，错误码："+s.Code),e.listLoading=!1)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t)),e.listLoading=!1}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;"post"===t.mode&&t.addDeviceModel()}))},inputTSLName:function(){this.form.TSLName=this.form.TSLName.replace(/[^\w\.\/]/gi,"")},addDeviceModel:function(){var e=this,t="";t="./api/v1/device/tsl",this.$axios({method:"post",url:t,data:e.form,headers:{token:this.$store.getters.token}}).then((function(t){var s=t.data;"0"===s.Code?(e.addVisible=!1,e.getAllDeviceModel(),e.$message.success("添加设备模型成功")):"1"===s.Code?e.$message.error(s.Message):"-1"===s.Code?(e.$message.error(s.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):e.$message.error("返回未知错误，错误码："+s.Code)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t))}))},handelAddDeviceModel:function(){this.form={},this.addVisible=!0,this.title="添加设备模型",this.mode="post"},handleAddCustomFunction:function(e){this.$router.push({name:"deviceModelCustomFunction",params:{deviceModel:e}})},getDeviceVariantTemplate:function(e){this.firstVisible=!1,this.sencondVisible=!0;var t=e.templateName;console.log(t);var s=this,i="";i="./api/v1/device/addCommInterface",this.$axios({method:"post",url:i,data:s.form,headers:{token:this.$store.getters.token}}).then((function(e){var t=e.data;"0"===t.Code?this.addVisible=!1:"1"===t.Code?s.$message.error(t.Message):"-1"===t.Code?(s.$message.error(t.Message),s.$store.dispatch("user/resetToken"),s.$router.push("/login?redirect=".concat(s.$route.fullPath))):s.$message.error("返回未知错误，错误码："+t.Code)})).catch((function(e){s.$message.error("出错了"+JSON.stringify(e))}))},handleEdit:function(e,t){this.form=t,this.editVisible=!0},beforeFile:function(e){var t=e.name;this.$message.success("准备上传文件"+t)},fileRequest:function(e){var t=new FormData;t.append("file",e.file);var s=this,i="";i="./api/v1/update/plugin",this.$axios({method:"post",url:i,data:t,headers:{token:this.$store.getters.token,"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;"0"===t.Code?(s.$message.success("上传升级文件成功"),setTimeout(s.getAllDeviceModel,1e3)):"1"===t.Code?s.$message.error(t.Message):"-1"===t.Code?(s.$message.error(t.Message),s.$store.dispatch("user/resetToken"),s.$router.push("/login?redirect=".concat(s.$route.fullPath))):s.$message.error("返回未知错误，错误码："+t.Code)})).catch((function(e){s.$message.error("出错了"+JSON.stringify(e))}))}}}),o=a,l=(s("6937"),s("2877")),n=Object(l["a"])(o,i,r,!1,null,"179b4743",null);t["default"]=n.exports}}]);