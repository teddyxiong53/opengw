(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f233eeb2"],{"28a5":function(e,t,i){"use strict";var s=i("aae3"),a=i("cb7c"),r=i("ebd6"),o=i("0390"),n=i("9def"),l=i("5f1b"),c=i("520a"),d=i("79e5"),u=Math.min,m=[].push,f="split",h="length",p="lastIndex",g=4294967295,v=!d((function(){RegExp(g,"y")}));i("214f")("split",2,(function(e,t,i,d){var x;return x="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[h]||2!="ab"[f](/(?:ab)*/)[h]||4!="."[f](/(.?)(.?)/)[h]||"."[f](/()()/)[h]>1||""[f](/.?/)[h]?function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!s(e))return i.call(a,e,t);var r,o,n,l=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,f=void 0===t?g:t>>>0,v=new RegExp(e.source,d+"g");while(r=c.call(v,a)){if(o=v[p],o>u&&(l.push(a.slice(u,r.index)),r[h]>1&&r.index<a[h]&&m.apply(l,r.slice(1)),n=r[0][h],u=o,l[h]>=f))break;v[p]===r.index&&v[p]++}return u===a[h]?!n&&v.test("")||l.push(""):l.push(a.slice(u)),l[h]>f?l.slice(0,f):l}:"0"[f](void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)}:i,[function(i,s){var a=e(this),r=void 0==i?void 0:i[t];return void 0!==r?r.call(i,a,s):x.call(String(a),i,s)},function(e,t){var s=d(x,e,this,t,x!==i);if(s.done)return s.value;var c=a(e),m=String(this),f=r(c,RegExp),h=c.unicode,p=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(v?"y":"g"),b=new f(v?c:"^(?:"+c.source+")",p),$=void 0===t?g:t>>>0;if(0===$)return[];if(0===m.length)return null===l(b,m)?[m]:[];var y=0,S=0,T=[];while(S<m.length){b.lastIndex=v?S:0;var L,_=l(b,v?m:m.slice(S));if(null===_||(L=u(n(b.lastIndex+(v?0:S)),m.length))===y)S=o(m,S,h);else{if(T.push(m.slice(y,S)),T.length===$)return T;for(var C=1;C<=_.length-1;C++)if(T.push(_[C]),T.length===$)return T;S=y=L}}return T.push(m.slice(y)),T}]}))},"49ae":function(e,t,i){"use strict";var s=i("c4a2"),a=i.n(s);a.a},c4a2:function(e,t,i){},d8db:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.firstVisible,expression:"firstVisible"}],attrs:{gutter:20}},[i("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:12,md:6}},[i("el-row",{attrs:{gutter:10}})],1),e._v(" "),i("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:12,md:18}},[i("div",{staticStyle:{"margin-bottom":"20px",float:"right",display:"flex"}},[i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:e.getAllDeviceModel}},[e._v("刷新")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handelAddDeviceModel}},[e._v("添加")])],1)])],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.firstVisible,expression:"firstVisible"}],attrs:{gutter:20}},e._l(e.deviceModelList,(function(t,s){return i("el-col",{key:s,attrs:{xs:24,sm:12,md:8}},[i("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-left":"10px"},attrs:{type:"text"},on:{click:function(i){return e.handleAddCustomFunction(t)}}},[e._v("自定义功能")]),e._v(" "),i("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-left":"1px"},attrs:{type:"text"},on:{click:function(i){return e.handleEdit(t)}}},[e._v("修改")]),e._v(" "),i("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(i){return e.handelDelete(t)}}},[e._v("删除")])],1),e._v(" "),i("el-row",{staticClass:"text item"},[i("el-col",{staticStyle:{"align-self":"center","padding-right":"15px","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[i("span",[e._v("模型名称：")])]),e._v(" "),i("el-col",{attrs:{xs:16,sm:16,md:16}},[i("span",[e._v(e._s(t.Name))])])],1),e._v(" "),i("el-row",{staticClass:"text item"},[i("el-col",{staticStyle:{"align-self":"center","padding-right":"15px","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[i("span",[e._v("说明信息：")])]),e._v(" "),i("el-col",{attrs:{xs:16,sm:16,md:16}},[i("span",[e._v(e._s(t.Explain))])])],1),e._v(" "),i("el-row",{staticClass:"text item"},[i("el-col",{staticStyle:{"align-self":"center","padding-right":"15px","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[i("span",[e._v("关联插件：")])]),e._v(" "),i("el-col",{staticStyle:{display:"flex"},attrs:{xs:16,sm:16,md:16}},[""!=t.Plugin&&void 0!=t.Plugin?i("span",{staticStyle:{"margin-right":"5px",float:"left","align-self":"center"}},[e._v(e._s(t.Plugin))]):e._e(),e._v(" "),i("el-upload",{staticStyle:{"margin-right":"5px",float:"left"},attrs:{"before-upload":e.beforeFile,"http-request":e.fileRequest,"show-file-list":!1,data:{TSLName:t.Name},action:""}},[i("el-button",{attrs:{size:"small"}},[e._v("导入")])],1),e._v(" "),""!=t.Plugin&&void 0!=t.Plugin?i("el-button",{staticStyle:{float:"left"},attrs:{size:"small"},on:{click:function(i){return e.exportPlugin(t)}}},[e._v("导出")]):e._e()],1)],1)],1)],1)})),1),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[i("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"150px","auto-complete":"on"}},[i("el-form-item",{attrs:{label:"设备模型标识符",prop:"TSLName"}},[i("el-input",{attrs:{disabled:"put"===e.mode},on:{input:e.inputTSLName},model:{value:e.form.TSLName,callback:function(t){e.$set(e.form,"TSLName",t)},expression:"form.TSLName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"设备模型标识符说明",prop:"TSLExplain"}},[i("el-input",{model:{value:e.form.TSLExplain,callback:function(t){e.$set(e.form,"TSLExplain",t)},expression:"form.TSLExplain"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.addVisible=!1,e.form={},e.getAllDeviceModel()}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},a=[],r=(i("7f7f"),i("28a5"),i("a481"),{filters:{statusFilter:function(e){var t={LocalSerial:"success",TcpClient:"gray",TcpServer:"danger"};return t[e]||"info"},interfaceTypeFilter:function(e){var t={LocalSerial:"本地串口",TcpClient:"Tcp客户端",TcpServer:"Tcp服务端"};return t[e]||"未知"},parityFilter:function(e){return console.log(e),"N"===e?"无校验":"J"===e?"奇校验":"O"===e?"偶校验":"未知"}},data:function(){var e=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘'，。、]/im,t=function(t,i,s){void 0===i||""===i?s(new Error("不能为空")):e.test(i)?s(new Error("不能输入特殊字符")):s()};return{form:{TSLName:"",TSLExplain:""},rules:{TSLExplain:[{required:!0,validator:t,trigger:"blur"}]},filtedData:[],listLoading:!0,filterText:"",editVisible:!1,baudRateList:[],mode:"",title:"",addVisible:!1,deviceModelList:[],activeNames:"11",firstVisible:!0,sencondVisible:!1}},created:function(){this.getAllDeviceModel(),this.InterfaceTypeList=[{id:"LocalSerial",text:"本地串口"},{id:"TcpClient",text:"Tcp客户端"}],this.templateTypeList=[{id:"1",text:"fcu200"},{id:"2",text:"fcu210"}],this.parityList=[{id:"N",text:"无校验"},{id:"J",text:"奇校验"},{id:"O",text:"偶校验"}]},methods:{getAllDeviceModel:function(){this.listLoading=!0;var e=this,t="";t="./api/v1/device/tsl",this.$axios({method:"get",url:t,headers:{token:this.$store.getters.token}}).then((function(t){var i=t.data;"0"===i.Code?(e.deviceModelList=i.Data,e.listLoading=!1,e.$message.success("获取设备模型列表成功")):"1"===i.Code?(e.$message.error(i.Message),e.listLoading=!1):"-1"===i.Code?(e.listLoading=!1,e.$message.error(i.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):(e.$message.error("返回未知错误，错误码："+i.Code),e.listLoading=!1)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t)),e.listLoading=!1}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.addModifyDeviceModel()}))},inputTSLName:function(){this.form.TSLName=this.form.TSLName.replace(/[^\w\.\/]/gi,"")},addModifyDeviceModel:function(){var e=this,t="";t="./api/v1/device/tsl",this.$axios({method:e.mode,url:t,data:e.form,headers:{token:this.$store.getters.token}}).then((function(t){var i=t.data;"0"===i.Code?(e.addVisible=!1,e.getAllDeviceModel(),"post"===e.mode?e.$message.success("添加设备模型成功"):"put"===e.mode&&e.$message.success("修改设备模型成功")):"1"===i.Code?e.$message.error(i.Message):"-1"===i.Code?(e.$message.error(i.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):e.$message.error("返回未知错误，错误码："+i.Code)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t))}))},handelDelete:function(e){this.mode="delete";var t=this;this.$messageBox.confirm("你确定要删除这个设备模型吗？<br />","删除设备模型",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0,dangerouslyUseHTMLString:!0,type:"info"}).then((function(i){"confirm"===i&&(t.mode="delete",t.deleteDeviceModel(e),t.getAllDeviceModel())})).catch((function(e){"cancel"===e&&t.getAllDeviceModel()}))},deleteDeviceModel:function(e){var t=this,i="";i="./api/v1/device/tsl",this.$axios({method:"delete",url:i,data:{TSLName:e.Name},headers:{token:this.$store.getters.token}}).then((function(e){var i=e.data;"0"===i.Code?t.$message.success("删除设备模型成功"):"1"===i.Code?t.$message.error(i.Message):"-1"===i.Code?(t.$message.error(i.Message),t.$store.dispatch("user/resetToken"),t.$router.push("/login?redirect=".concat(t.$route.fullPath))):t.$message.error("返回未知错误，错误码："+i.Code)})).catch((function(e){t.$message.error("出错了"+JSON.stringify(e))}))},handelAddDeviceModel:function(){this.form={},this.addVisible=!0,this.title="添加设备模型",this.mode="post"},handleAddCustomFunction:function(e){this.$router.push({name:"deviceModelCustomFunction",params:{deviceModel:e}})},getDeviceVariantTemplate:function(e){this.firstVisible=!1,this.sencondVisible=!0;var t=e.templateName;console.log(t);var i=this,s="";s="./api/v1/device/addCommInterface",this.$axios({method:"post",url:s,data:i.form,headers:{token:this.$store.getters.token}}).then((function(e){var t=e.data;"0"===t.Code?this.addVisible=!1:"1"===t.Code?i.$message.error(t.Message):"-1"===t.Code?(i.$message.error(t.Message),i.$store.dispatch("user/resetToken"),i.$router.push("/login?redirect=".concat(i.$route.fullPath))):i.$message.error("返回未知错误，错误码："+t.Code)})).catch((function(e){i.$message.error("出错了"+JSON.stringify(e))}))},handleEdit:function(e){this.form={},this.$set(this.form,"TSLName",e.Name),this.$set(this.form,"TSLExplain",e.Explain),this.addVisible=!0,this.title="修改设备模型",this.mode="put"},exportPlugin:function(e){var t=this,i="./api/v1/device/tsl/plugin?TSLName="+e.Name;this.$axios({method:"get",url:i,responseType:"blob",headers:{token:this.$store.getters.token}}).then((function(e){var t=e.data,i=new Blob([t]),s="demo";if(e.headers["content-disposition"]&&(s=e.headers["content-disposition"].split(";")[1].split("=")[1]),"download"in document.createElement("a")){var a=document.createElement("a");a.download=s,a.style.display="none",a.href=URL.createObjectURL(i),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(i,s)})).catch((function(e){t.$message.error("出错了"+e),console.log(e)}))},beforeFile:function(e){var t=e.name;this.$message.success("准备上传文件"+t)},fileRequest:function(e){var t=new FormData;t.append("TSLName",e.data.TSLName),t.append("FileName",e.file);var i=this,s="";s="./api/v1/device/tsl/plugin",this.$axios({method:"post",url:s,data:t,headers:{token:this.$store.getters.token,"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;"0"===t.Code?(i.$message.success("上传升级文件成功"),setTimeout(i.getAllDeviceModel,1e3)):"1"===t.Code?i.$message.error(t.Message):"-1"===t.Code?(i.$message.error(t.Message),i.$store.dispatch("user/resetToken"),i.$router.push("/login?redirect=".concat(i.$route.fullPath))):i.$message.error("返回未知错误，错误码："+t.Code)})).catch((function(e){i.$message.error("出错了"+JSON.stringify(e))}))}}}),o=r,n=(i("49ae"),i("2877")),l=Object(n["a"])(o,s,a,!1,null,"b433a052",null);t["default"]=l.exports}}]);