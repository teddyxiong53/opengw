(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a7623f6"],{"4b0d":function(e,t,r){"use strict";var i=r("d3bb"),a=r.n(i);a.a},"73c8":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:24,md:24}},[r("el-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"text"},on:{click:e.goBack}},[e._v("返回")]),e._v("\n      "+e._s("设备实时监测数据 -- "+(e.deviceInfo?e.deviceInfo.Addr:"无"))+"\n      "),e.deviceInfo?r("el-tag",{attrs:{type:e._f("statusFilter")(e.deviceInfo.CommStatus)}},[e._v(e._s(e._f("netWorkFilter")(e.deviceInfo.CommStatus)))]):e._e()],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.nodeVariableList,"element-loading-text":"加载中",border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{type:"index",index:e.indexMethod,align:"center",label:"序号"}}),e._v(" "),r("el-table-column",{attrs:{label:"变量名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.lable)+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"变量标签",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.name)+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"变量类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.type))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"变量值",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.value))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"实测时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.timestamp))])]}}])})],1)],1)],1)},a=[],n={filters:{statusFilter:function(e){var t={onLine:"success",offLine:"gray",noRegister:"danger"};return t[e]||"info"},interfaceTypeFilter:function(e){var t={LocalSerial:"本地串口",TcpClient:"Tcp客户端",TcpServer:"Tcp服务端"};return t[e]||"未知"},netWorkFilter:function(e){var t={onLine:"在线",noRegister:"未注册",offLine:"离线"};return t[e]||"未知"},parityFilter:function(e){return console.log(e),"N"===e?"无校验":"J"===e?"奇校验":"O"===e?"偶校验":"未知"}},data:function(){return{nodeVariableList:[],listLoading:!0,currentCollInterfaceName:"",currentDeviceAddr:"",deviceInfo:{}}},computed:{},created:function(){var e=this.$route.params;if(this.currentCollInterfaceName=e.CollInterfaceName,this.deviceInfo=e.deviceInfo,!this.currentCollInterfaceName||!this.deviceInfo.Addr)return this.$message.error("没有获取到参数"),void this.$router.push("/config/interface");this.getNodeVariable()},methods:{getNodeVariable:function(){this.listLoading=!0;var e=this,t="";t="./api/v1/device/nodeVariable",this.$axios({method:"get",url:t,params:{CollInterfaceName:e.currentCollInterfaceName,Addr:e.deviceInfo.Addr},headers:{token:this.$store.getters.token}}).then((function(t){var r=t.data;"0"===r.Code?(e.nodeVariableList=r.Data.variable,e.listLoading=!1):"1"===r.Code?(e.$message.error(r.Message),e.listLoading=!1):"-1"===r.Code?(e.listLoading=!1,e.$message.error(r.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):(e.$message.error("返回未知错误，错误码："+r.Code),e.listLoading=!1)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t)),e.listLoading=!1}))},indexMethod:function(e){return e+1},goBack:function(){var e=this;this.$router.push({name:"interface",params:{CollInterfaceName:e.currentCollInterfaceName,deviceInfo:e.deviceInfo}})},getAllCommInterface:function(){this.listLoading=!0;var e=this,t="";t="./api/v1/device/commInterface",this.$axios({method:"get",url:t,headers:{token:this.$store.getters.token}}).then((function(t){var r=t.data;"0"===r.Code?(e.InterfaceMap=r.Data.InterfaceMap,e.listLoading=!1):"1"===r.Code?(e.$message.error(r.Message),e.listLoading=!1):"-1"===r.Code?(e.listLoading=!1,e.$message.error(r.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):(e.$message.error("返回未知错误，错误码："+r.Code),e.listLoading=!1)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t)),e.listLoading=!1}))},getAllTemplate:function(){this.listLoading=!0;var e=this,t="";t="./api/v1/device/template",this.$axios({method:"get",url:t,headers:{token:this.$store.getters.token}}).then((function(t){var r=t.data;"0"===r.Code?(e.templateList=r.Data,e.listLoading=!1):"1"===r.Code?(e.$message.error(r.Message),e.listLoading=!1):"-1"===r.Code?(e.listLoading=!1,e.$message.error(r.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):(e.$message.error("返回未知错误，错误码："+r.Code),e.listLoading=!1)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t)),e.listLoading=!1}))},editInterface:function(e){this.form={},this.addVisible=!0,this.form=e,this.getAllCommInterface(),this.title="修改采集接口",this.mode="put"},deleteInterface:function(e){var t=this,r=this;this.$messageBox.confirm("你确定要删除采集接口吗？<br /><h3>"+e.CollInterfaceName+"</h3>","删除采集接口",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0,dangerouslyUseHTMLString:!0,type:"info"}).then((function(i){"confirm"===i&&(t.form={},t.$set(r.form,"CollInterfaceName",e.CollInterfaceName),t.mode="delete",r.addInterface())})).catch((function(e){"cancel"===e&&t.getAllInterface()}))},handelGetDeviceListByInterface:function(e){this.firstVisible=!1,this.sencondVisible=!0,this.currentCollInterfaceName=e.CollInterfaceName,this.getDeviceListByInterface()},getDeviceListByInterface:function(){var e=this,t="";t="./api/v1/device/interface",this.$axios({method:"get",url:t,params:{CollInterfaceName:e.currentCollInterfaceName},headers:{token:this.$store.getters.token}}).then((function(t){var r=t.data;"0"===r.Code?e.deviceListByCollInterface=r.Data.DeviceNodeMap:"1"===r.Code?e.$message.error(r.Message):"-1"===r.Code?(e.$message.error(r.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):e.$message.error("返回未知错误，错误码："+r.Code)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t))}))},handleClick:function(e){alert("开发中")},handleEdit:function(e,t){this.form=t,this.editVisible=!0},handleAddDevice:function(){this.deviceVisible=!0,this.getAllTemplate(),this.title="添加设备",this.form.CollInterfaceName=this.currentCollInterfaceName,this.mode="post"},handleModifyDevice:function(){if(this.selectDeviceNames=[],this.form={},this.mode="put",this.multipleSelection.length<1)this.$message.error("请至少选择一个设备");else{if(1===this.multipleSelection.length)return this.deviceVisible=!0,this.getAllTemplate(),this.title="修改设备",this.form.CollInterfaceName=this.currentCollInterfaceName,this.form.Name=this.multipleSelection[0].Name,this.$set(this.form,"Addr",this.multipleSelection[0].Addr),void(this.mode="put");this.getAllTemplate();var e=[];this.multipleSelection.filter((function(t){t.Name&&e.push(t.Name)})),e.length<1?this.$message.error("选择的设备无名称"):(this.selectDeviceNames=e,this.batchModifyDeviceVisible=!0,this.form.CollInterfaceName=this.currentCollInterfaceName)}},handleDeleteDevice:function(){if(this.selectDeviceNames=[],this.multipleSelection.length<1)this.$message.error("请至少选择一个设备");else{var e=[];if(this.multipleSelection.filter((function(t){t.Name&&e.push(t.Name)})),e.length<1)this.$message.error("选择的设备无名称");else{this.selectDeviceNames=e;var t=this;this.$messageBox.confirm("你确定要删除这些设备吗？<br />","删除设备",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0,dangerouslyUseHTMLString:!0,type:"info"}).then((function(e){"confirm"===e&&(t.mode="delete",t.batchModifyDevice(),t.getDeviceListByInterface())})).catch((function(e){"cancel"===e&&t.getDeviceListByInterface()}))}}},batchModifyDevice:function(){var e=this,t={},r="";"put"===this.mode&&(t.CollInterfaceName=e.currentCollInterfaceName,t.Name=e.selectDeviceNames,t.Type=e.form.Type,r="nodes"),"delete"===this.mode&&(t.CollInterfaceName=e.currentCollInterfaceName,t.Name=e.selectDeviceNames,r="node");var i="";i="./api/v1/device/"+r,this.$axios({method:e.mode,url:i,data:t,headers:{token:this.$store.getters.token}}).then((function(t){var r=t.data;"0"===r.Code?e.batchModifyDeviceVisible=!1:"1"===r.Code?e.$message.error(r.Message):"-1"===r.Code?(e.$message.error(r.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):e.$message.error("返回未知错误，错误码："+r.Code)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t))}))},handleSelectionChange:function(e){this.multipleSelection=e},addCommInterface:function(){var e=this,t="";t="./api/v1/device/addCommInterface",this.$axios({method:"post",url:t,data:e.form,headers:{token:this.$store.getters.token}}).then((function(t){var r=t.data;"0"===r.Code?e.addVisible=!1:"1"===r.Code?e.$message.error(r.Message):"-1"===r.Code?(e.$message.error(r.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):e.$message.error("返回未知错误，错误码："+r.Code)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t))}))}}},s=n,o=(r("4b0d"),r("2877")),l=Object(o["a"])(s,i,a,!1,null,"27b2b15e",null);t["default"]=l.exports},d3bb:function(e,t,r){}}]);