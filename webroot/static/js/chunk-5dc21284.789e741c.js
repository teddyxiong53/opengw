(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5dc21284"],{"1af2":function(e,t,i){},"3c35":function(e,t,i){"use strict";var a=i("1af2"),r=i.n(a);r.a},aa77:function(e,t,i){var a=i("5ca1"),r=i("be13"),n=i("79e5"),s=i("fdef"),o="["+s+"]",l="​",c=RegExp("^"+o+o+"*"),d=RegExp(o+o+"*$"),u=function(e,t,i){var r={},o=n((function(){return!!s[e]()||l[e]()!=l})),c=r[e]=o?t(f):s[e];i&&(r[i]=c),a(a.P+a.F*o,"String",r)},f=u.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(d,"")),e};e.exports=u},ad87:function(e,t,i){},c5f6:function(e,t,i){"use strict";var a=i("7726"),r=i("69a8"),n=i("2d95"),s=i("5dbc"),o=i("6a99"),l=i("79e5"),c=i("9093").f,d=i("11e9").f,u=i("86cc").f,f=i("aa77").trim,h="Number",m=a[h],g=m,p=m.prototype,v=n(i("2aeb")(p))==h,b="trim"in String.prototype,I=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){t=b?t.trim():f(t,3);var i,a,r,n=t.charCodeAt(0);if(43===n||45===n){if(i=t.charCodeAt(2),88===i||120===i)return NaN}else if(48===n){switch(t.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+t}for(var s,l=t.slice(2),c=0,d=l.length;c<d;c++)if(s=l.charCodeAt(c),s<48||s>r)return NaN;return parseInt(l,a)}}return+t};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof m&&(v?l((function(){p.valueOf.call(i)})):n(i)!=h)?s(new g(I(t)),i,m):I(t)};for(var N,C=i("9e1e")?c(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),$=0;C.length>$;$++)r(g,N=C[$])&&!r(m,N)&&u(m,N,d(g,N));m.prototype=p,p.constructor=m,i("2aba")(a,h,m)}},e7be:function(e,t,i){"use strict";var a=i("ad87"),r=i.n(a);r.a},eec8:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-row",{attrs:{gutter:20}},[i("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:12,md:12}},[i("el-button",{attrs:{type:"plain",icon:"el-icon-back",size:"small"},on:{click:e.goBack}},[e._v("设备管理")]),e._v(" "),i("el-divider",{attrs:{direction:"vertical"}}),e._v("\n      "+e._s("设备实时监测数据 -- "+(e.deviceInfo?e.deviceInfo.Addr:"无"))+"\n      "),e.deviceInfo?i("el-tag",{attrs:{type:e._f("statusFilter")(e.deviceInfo.CommStatus)}},[e._v(e._s(e._f("netWorkFilter")(e.deviceInfo.CommStatus)))]):e._e()],1),e._v(" "),i("el-col",{staticStyle:{"margin-bottom":"20px","text-align":"right"},attrs:{xs:24,sm:12,md:12}},[i("el-button-group",[i("el-tooltip",{attrs:{effect:"light",content:"刷新",placement:"top-start"}},[i("el-button",{attrs:{type:"plain",icon:"el-icon-refresh"},on:{click:e.handleRefresh}})],1),e._v(" "),i("el-tooltip",{attrs:{effect:"light",content:"切换",placement:"top-start"}},[i("el-button",{attrs:{type:"plain",icon:"el-icon-menu"},on:{click:e.handleChange}})],1)],1)],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.listVisible,expression:"listVisible"}],attrs:{gutter:20}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.nodeVariableList,"element-loading-text":"加载中",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{type:"index",index:e.indexMethod,align:"center",label:"序号"}}),e._v(" "),i("el-table-column",{attrs:{label:"变量名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.lable)+"\n        ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"变量标签",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.name)+"\n        ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"变量类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.type))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"变量值",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.value))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"实测时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.timestamp))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.handleClick(t.row)}}},[e._v("查看数据")])]}}])})],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.cardVisible,expression:"cardVisible"}],attrs:{gutter:20}},e._l(e.nodeVariableList,(function(t,a){return i("el-col",{key:a,staticStyle:{"margin-bottom":"10px"},attrs:{xs:24,sm:12,md:6}},[i("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v(e._s(t.lable))]),e._v(" "),i("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[e._v("查看数据")])],1),e._v(" "),i("el-row",{staticClass:"text item"},[i("el-col",{attrs:{xs:24,sm:24,md:24}},[i("span",[e._v(e._s(t.name))])])],1),e._v(" "),i("el-row",[i("el-col",{staticStyle:{"align-self":"center","text-align":"center","font-size":"22px",color:"#333"},attrs:{xs:24,sm:24,md:24}},[i("span",[e._v(e._s(t.value))])])],1),e._v(" "),i("div",{staticClass:"bottom clearfix text"},[i("span",[e._v(e._s(t.timestamp))])])],1)],1)})),1),e._v(" "),i("el-tooltip",{attrs:{placement:"top",content:"回到顶部"}},[i("back-to-top",{attrs:{"custom-style":e.myBackToTopStyle,"visibility-height":300,"back-position":50,"transition-name":"fade"}})],1)],1)},r=[],n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:e.transitionName}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"back-to-ceiling",style:e.customStyle,on:{click:e.backToTop}},[i("svg",{staticClass:"Icon Icon--backToTopArrow",staticStyle:{height:"16px",width:"16px"},attrs:{width:"16",height:"16",viewBox:"0 0 17 17",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"}},[i("path",{attrs:{d:"M12.036 15.59a1 1 0 0 1-.997.995H5.032a.996.996 0 0 1-.997-.996V8.584H1.03c-1.1 0-1.36-.633-.578-1.416L7.33.29a1.003 1.003 0 0 1 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.004z"}})])])])},s=[],o=(i("c5f6"),{name:"BackToTop",props:{visibilityHeight:{type:Number,default:400},backPosition:{type:Number,default:0},customStyle:{type:Object,default:function(){return{right:"50px",bottom:"50px",width:"40px",height:"40px","border-radius":"4px","line-height":"45px",background:"#e7eaf1"}}},transitionName:{type:String,default:"fade"}},data:function(){return{visible:!1,interval:null,isMoving:!1}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll),this.interval&&clearInterval(this.interval)},methods:{handleScroll:function(){this.visible=window.pageYOffset>this.visibilityHeight},backToTop:function(){var e=this;if(!this.isMoving){var t=window.pageYOffset,i=0;this.isMoving=!0,this.interval=setInterval((function(){var a=Math.floor(e.easeInOutQuad(10*i,t,-t,500));a<=e.backPosition?(window.scrollTo(0,e.backPosition),clearInterval(e.interval),e.isMoving=!1):window.scrollTo(0,a),i++}),16.7)}},easeInOutQuad:function(e,t,i,a){return(e/=a/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t}}}),l=o,c=(i("e7be"),i("2877")),d=Object(c["a"])(l,n,s,!1,null,"053f1ae1",null),u=d.exports,f={components:{BackToTop:u},filters:{statusFilter:function(e){var t={onLine:"success",offLine:"gray",noRegister:"danger"};return t[e]||"info"},interfaceTypeFilter:function(e){var t={LocalSerial:"本地串口",TcpClient:"Tcp客户端",TcpServer:"Tcp服务端"};return t[e]||"未知"},netWorkFilter:function(e){var t={onLine:"在线",noRegister:"未注册",offLine:"离线"};return t[e]||"未知"},parityFilter:function(e){return console.log(e),"N"===e?"无校验":"J"===e?"奇校验":"O"===e?"偶校验":"未知"}},data:function(){return{nodeVariableList:[],listLoading:!0,currentCollInterfaceName:"",currentDeviceAddr:"",deviceInfo:{},listVisible:!0,cardVisible:!1,myBackToTopStyle:{right:"50px",bottom:"50px",width:"40px",height:"40px","border-radius":"4px","line-height":"45px",background:"#e7eaf1"}}},computed:{},created:function(){var e=this.$route.params;this.currentCollInterfaceName=e.CollInterfaceName,this.deviceInfo=e.deviceInfo,this.currentCollInterfaceName&&this.deviceInfo.Addr?this.getNodeVariable():this.$router.push("/config/interface")},methods:{getNodeVariable:function(){this.listLoading=!0;var e=this,t="";t="./api/v1/device/nodeVariable",this.$axios({method:"get",url:t,params:{CollInterfaceName:e.currentCollInterfaceName,Addr:e.deviceInfo.Addr},headers:{token:this.$store.getters.token}}).then((function(t){var i=t.data;"0"===i.Code?(e.nodeVariableList=i.Data,e.listLoading=!1):"1"===i.Code?(e.$message.error(i.Message),e.listLoading=!1):"-1"===i.Code?(e.listLoading=!1,e.$message.error(i.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):(e.$message.error("返回未知错误，错误码："+i.Code),e.listLoading=!1)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t)),e.listLoading=!1}))},indexMethod:function(e){return e+1},goBack:function(){var e=this;this.$router.push({name:"deviceManager",params:{CollInterfaceName:e.currentCollInterfaceName}})},handleRefresh:function(){this.currentCollInterfaceName&&this.deviceInfo.Addr?this.getNodeVariable():this.$router.push("/config/interface")},handleChange:function(){this.listVisible=!this.listVisible,this.cardVisible=!this.cardVisible},getAllCommInterface:function(){this.listLoading=!0;var e=this,t="";t="./api/v1/device/commInterface",this.$axios({method:"get",url:t,headers:{token:this.$store.getters.token}}).then((function(t){var i=t.data;"0"===i.Code?(e.InterfaceMap=i.Data.InterfaceMap,e.listLoading=!1):"1"===i.Code?(e.$message.error(i.Message),e.listLoading=!1):"-1"===i.Code?(e.listLoading=!1,e.$message.error(i.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):(e.$message.error("返回未知错误，错误码："+i.Code),e.listLoading=!1)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t)),e.listLoading=!1}))},getAllTemplate:function(){this.listLoading=!0;var e=this,t="";t="./api/v1/device/template",this.$axios({method:"get",url:t,headers:{token:this.$store.getters.token}}).then((function(t){var i=t.data;"0"===i.Code?(e.templateList=i.Data,e.listLoading=!1):"1"===i.Code?(e.$message.error(i.Message),e.listLoading=!1):"-1"===i.Code?(e.listLoading=!1,e.$message.error(i.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):(e.$message.error("返回未知错误，错误码："+i.Code),e.listLoading=!1)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t)),e.listLoading=!1}))},editInterface:function(e){this.form={},this.addVisible=!0,this.form=e,this.getAllCommInterface(),this.title="修改采集接口",this.mode="put"},deleteInterface:function(e){var t=this,i=this;this.$messageBox.confirm("你确定要删除采集接口吗？<br /><h3>"+e.CollInterfaceName+"</h3>","删除采集接口",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0,dangerouslyUseHTMLString:!0,type:"info"}).then((function(a){"confirm"===a&&(t.form={},t.$set(i.form,"CollInterfaceName",e.CollInterfaceName),t.mode="delete",i.addInterface())})).catch((function(e){"cancel"===e&&t.getAllInterface()}))},handelGetDeviceListByInterface:function(e){this.firstVisible=!1,this.sencondVisible=!0,this.currentCollInterfaceName=e.CollInterfaceName,this.getDeviceListByInterface()},getDeviceListByInterface:function(){var e=this,t="";t="./api/v1/device/interface",this.$axios({method:"get",url:t,params:{CollInterfaceName:e.currentCollInterfaceName},headers:{token:this.$store.getters.token}}).then((function(t){var i=t.data;"0"===i.Code?e.deviceListByCollInterface=i.Data.DeviceNodeMap:"1"===i.Code?e.$message.error(i.Message):"-1"===i.Code?(e.$message.error(i.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):e.$message.error("返回未知错误，错误码："+i.Code)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t))}))},handleClick:function(e){alert("开发中")},handleEdit:function(e,t){this.form=t,this.editVisible=!0},handleAddDevice:function(){this.deviceVisible=!0,this.getAllTemplate(),this.title="添加设备",this.form.CollInterfaceName=this.currentCollInterfaceName,this.mode="post"},handleModifyDevice:function(){if(this.selectDeviceNames=[],this.form={},this.mode="put",this.multipleSelection.length<1)this.$message.error("请至少选择一个设备");else{if(1===this.multipleSelection.length)return this.deviceVisible=!0,this.getAllTemplate(),this.title="修改设备",this.form.CollInterfaceName=this.currentCollInterfaceName,this.form.Name=this.multipleSelection[0].Name,this.$set(this.form,"Addr",this.multipleSelection[0].Addr),void(this.mode="put");this.getAllTemplate();var e=[];this.multipleSelection.filter((function(t){t.Name&&e.push(t.Name)})),e.length<1?this.$message.error("选择的设备无名称"):(this.selectDeviceNames=e,this.batchModifyDeviceVisible=!0,this.form.CollInterfaceName=this.currentCollInterfaceName)}},handleDeleteDevice:function(){if(this.selectDeviceNames=[],this.multipleSelection.length<1)this.$message.error("请至少选择一个设备");else{var e=[];if(this.multipleSelection.filter((function(t){t.Name&&e.push(t.Name)})),e.length<1)this.$message.error("选择的设备无名称");else{this.selectDeviceNames=e;var t=this;this.$messageBox.confirm("你确定要删除这些设备吗？<br />","删除设备",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0,dangerouslyUseHTMLString:!0,type:"info"}).then((function(e){"confirm"===e&&(t.mode="delete",t.batchModifyDevice(),t.getDeviceListByInterface())})).catch((function(e){"cancel"===e&&t.getDeviceListByInterface()}))}}},batchModifyDevice:function(){var e=this,t={},i="";"put"===this.mode&&(t.CollInterfaceName=e.currentCollInterfaceName,t.Name=e.selectDeviceNames,t.Type=e.form.Type,i="nodes"),"delete"===this.mode&&(t.CollInterfaceName=e.currentCollInterfaceName,t.Name=e.selectDeviceNames,i="node");var a="";a="./api/v1/device/"+i,this.$axios({method:e.mode,url:a,data:t,headers:{token:this.$store.getters.token}}).then((function(t){var i=t.data;"0"===i.Code?e.batchModifyDeviceVisible=!1:"1"===i.Code?e.$message.error(i.Message):"-1"===i.Code?(e.$message.error(i.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):e.$message.error("返回未知错误，错误码："+i.Code)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t))}))},handleSelectionChange:function(e){this.multipleSelection=e},addCommInterface:function(){var e=this,t="";t="./api/v1/device/addCommInterface",this.$axios({method:"post",url:t,data:e.form,headers:{token:this.$store.getters.token}}).then((function(t){var i=t.data;"0"===i.Code?e.addVisible=!1:"1"===i.Code?e.$message.error(i.Message):"-1"===i.Code?(e.$message.error(i.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):e.$message.error("返回未知错误，错误码："+i.Code)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t))}))}}},h=f,m=(i("3c35"),Object(c["a"])(h,a,r,!1,null,"0e06b8e8",null));t["default"]=m.exports},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);