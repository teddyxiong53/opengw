(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eaf6d2e2"],{"98fe":function(e,t,a){},"9adf":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:12,md:6}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:18,sm:18,md:18}},[a("el-input",{staticStyle:{width:"100%","margin-right":"10px"},attrs:{placeholder:"输入通信接口过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1),e._v(" "),a("el-col",{attrs:{xs:6,sm:6,md:6}},[a("el-button",{attrs:{type:"primary"},on:{click:e.getAllCommInterface}},[e._v("刷新")])],1)],1)],1),e._v(" "),a("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:12,md:18}},[a("el-button",{staticStyle:{float:"right","margin-left":"5px"},attrs:{type:"primary"},on:{click:function(t){e.addVisible=!0,e.form={},e.Param={},e.title="添加通讯接口",e.mode="post"}}},[e._v("添加")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},e._l(e.InterfaceMap,(function(t,r){return a("el-col",{key:r,attrs:{xs:24,sm:12,md:6}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(t.Name))]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return e.editCommInterface(t)}}},[e._v("修改")])],1),e._v(" "),a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v("接口类型：")])]),e._v(" "),a("el-col",{attrs:{xs:12,sm:12,md:12}},[a("el-tag",{attrs:{type:e._f("statusFilter")(t.Type)}},[e._v(e._s(e._f("interfaceTypeFilter")(t.Type)))])],1)],1),e._v(" "),a("el-collapse",{attrs:{accordion:""},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t.Param?a("el-collapse-item",{attrs:{title:"详细参数",name:t.Name}},[t.Param&&"LocalSerial"==t.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v("物理接口：")])]),e._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v(e._s(t.Param.Name))])])],1):e._e(),e._v(" "),t.Param&&"LocalSerial"==t.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v("波特率：")])]),e._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v(e._s(t.Param.BaudRate))])])],1):e._e(),e._v(" "),t.Param&&"LocalSerial"==t.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v("数据位：")])]),e._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v(e._s(t.Param.DataBits))])])],1):e._e(),e._v(" "),t.Param&&"LocalSerial"==t.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v("校验位：")])]),e._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v(e._s(e._f("parityFilter")(t.Param.Parity)))])])],1):e._e(),e._v(" "),t.Param&&"LocalSerial"==t.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v("停止位：")])]),e._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v(e._s(t.Param.StopBits))])])],1):e._e(),e._v(" "),t.Param&&"LocalSerial"==t.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v("命令间隔：")])]),e._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v(e._s(t.Param.Interval))])])],1):e._e(),e._v(" "),t.Param&&"LocalSerial"==t.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v("超时时间：")])]),e._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v(e._s(t.Param.Timeout))])])],1):e._e(),e._v(" "),t.Param&&"TcpClient"==t.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v("目标IP：")])]),e._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v(e._s(t.Param.remoteIp))])])],1):e._e(),e._v(" "),t.Param&&"TcpClient"==t.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v("目标端口：")])]),e._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:12,sm:12,md:12}},[a("span",[e._v(e._s(t.Param.remotePort))])])],1):e._e()],1):e._e()],1)],1)],1)})),1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"接口名称"}},[a("el-input",{model:{value:e.form.CommInterfaceName,callback:function(t){e.$set(e.form,"CommInterfaceName",t)},expression:"form.CommInterfaceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接口类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"接口类型"},on:{change:e.selectInterfaceType},model:{value:e.form.InterfaceType,callback:function(t){e.$set(e.form,"InterfaceType",t)},expression:"form.InterfaceType"}},e._l(e.InterfaceTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.id}})})),1)],1),e._v(" "),"LocalSerial"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"选择串口"}},[a("el-select",{attrs:{placeholder:"选择串口"},on:{change:e.selectSerial},model:{value:e.Param.Name,callback:function(t){e.$set(e.Param,"Name",t)},expression:"Param.Name"}},e._l(e.serialList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.Name,value:e.Name}})})),1)],1):e._e(),e._v(" "),"LocalSerial"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"波特率"}},[a("el-select",{attrs:{placeholder:"波特率"},model:{value:e.Param.BaudRate,callback:function(t){e.$set(e.Param,"BaudRate",t)},expression:"Param.BaudRate"}},e._l(e.baudRateList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.id}})})),1)],1):e._e(),e._v(" "),"LocalSerial"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"校验位"}},[a("el-select",{attrs:{placeholder:"校验位"},model:{value:e.Param.Parity,callback:function(t){e.$set(e.Param,"Parity",t)},expression:"Param.Parity"}},e._l(e.parityList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.id}})})),1)],1):e._e(),e._v(" "),"LocalSerial"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"数据位"}},[a("el-select",{attrs:{placeholder:"数据位"},model:{value:e.Param.DataBits,callback:function(t){e.$set(e.Param,"DataBits",t)},expression:"Param.DataBits"}},e._l(e.dataBitsList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.id}})})),1)],1):e._e(),e._v(" "),"LocalSerial"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"停止位"}},[a("el-select",{attrs:{placeholder:"停止位"},model:{value:e.Param.StopBits,callback:function(t){e.$set(e.Param,"StopBits",t)},expression:"Param.StopBits"}},e._l(e.stopBitsList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.id}})})),1)],1):e._e(),e._v(" "),"LocalSerial"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"命令间隔"}},[a("el-input",{attrs:{type:"number"},model:{value:e.Param.Interval,callback:function(t){e.$set(e.Param,"Interval",t)},expression:"Param.Interval"}})],1):e._e(),e._v(" "),"LocalSerial"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"通讯超时"}},[a("el-input",{attrs:{type:"number"},model:{value:e.Param.Timeout,callback:function(t){e.$set(e.Param,"Timeout",t)},expression:"Param.Timeout"}})],1):e._e(),e._v(" "),"TcpClient"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"目的地址"}},[a("el-input",{model:{value:e.Param.remoteIp,callback:function(t){e.$set(e.Param,"remoteIp",t)},expression:"Param.remoteIp"}})],1):e._e(),e._v(" "),"TcpClient"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"目的端口"}},[a("el-input",{attrs:{type:"number"},model:{value:e.Param.remotePort,callback:function(t){e.$set(e.Param,"remotePort",t)},expression:"Param.remotePort"}})],1):e._e(),e._v(" "),"TcpServer"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"本地端口"}},[a("el-input",{attrs:{type:"number"},model:{value:e.Param.localPort,callback:function(t){e.$set(e.Param,"localPort",t)},expression:"Param.localPort"}})],1):e._e()],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1,e.form={}}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addCommInterface}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"接口名称"}},[a("el-input",{model:{value:e.form.CommInterfaceName,callback:function(t){e.$set(e.form,"CommInterfaceName",t)},expression:"form.CommInterfaceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接口类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"接口类型"},on:{change:e.selectInterfaceType},model:{value:e.form.InterfaceType,callback:function(t){e.$set(e.form,"InterfaceType",t)},expression:"form.InterfaceType"}},e._l(e.InterfaceTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.id}})})),1)],1),e._v(" "),"LocalSerial"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"选择串口"}},[a("el-select",{attrs:{placeholder:"选择串口"},on:{change:e.selectSerial},model:{value:e.Param.Name,callback:function(t){e.$set(e.Param,"Name",t)},expression:"Param.Name"}},e._l(e.serialList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.Name,value:e.Name}})})),1)],1):e._e(),e._v(" "),"LocalSerial"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"波特率"}},[a("el-select",{attrs:{placeholder:"波特率"},model:{value:e.Param.BaudRate,callback:function(t){e.$set(e.Param,"BaudRate",t)},expression:"Param.BaudRate"}},e._l(e.baudRateList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.id}})})),1)],1):e._e(),e._v(" "),"LocalSerial"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"校验位"}},[a("el-select",{attrs:{placeholder:"校验位"},model:{value:e.Param.Parity,callback:function(t){e.$set(e.Param,"Parity",t)},expression:"Param.Parity"}},e._l(e.parityList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.id}})})),1)],1):e._e(),e._v(" "),"LocalSerial"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"数据位"}},[a("el-select",{attrs:{placeholder:"数据位"},model:{value:e.Param.DataBits,callback:function(t){e.$set(e.Param,"DataBits",t)},expression:"Param.DataBits"}},e._l(e.dataBitsList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.id}})})),1)],1):e._e(),e._v(" "),"LocalSerial"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"停止位"}},[a("el-select",{attrs:{placeholder:"停止位"},model:{value:e.Param.StopBits,callback:function(t){e.$set(e.Param,"StopBits",t)},expression:"Param.StopBits"}},e._l(e.stopBitsList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.id}})})),1)],1):e._e(),e._v(" "),"LocalSerial"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"命令间隔"}},[a("el-input",{attrs:{type:"number"},model:{value:e.Param.Interval,callback:function(t){e.$set(e.Param,"Interval",t)},expression:"Param.Interval"}})],1):e._e(),e._v(" "),"LocalSerial"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"通讯超时"}},[a("el-input",{attrs:{type:"number"},model:{value:e.Param.Timeout,callback:function(t){e.$set(e.Param,"Timeout",t)},expression:"Param.Timeout"}})],1):e._e(),e._v(" "),"TcpClient"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"目的地址"}},[a("el-input",{model:{value:e.Param.remoteIp,callback:function(t){e.$set(e.Param,"remoteIp",t)},expression:"Param.remoteIp"}})],1):e._e(),e._v(" "),"TcpClient"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"目的端口"}},[a("el-input",{attrs:{type:"number"},model:{value:e.Param.remotePort,callback:function(t){e.$set(e.Param,"remotePort",t)},expression:"Param.remotePort"}})],1):e._e(),e._v(" "),"TcpServer"==e.form.InterfaceType?a("el-form-item",{attrs:{label:"本地端口"}},[a("el-input",{attrs:{type:"number"},model:{value:e.Param.localPort,callback:function(t){e.$set(e.Param,"localPort",t)},expression:"Param.localPort"}})],1):e._e()],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEditSerial}},[e._v("确 定")])],1)],1)],1)},l=[],s={filters:{statusFilter:function(e){var t={LocalSerial:"success",TcpClient:"gray",TcpServer:"danger"};return t[e]||"info"},interfaceTypeFilter:function(e){var t={LocalSerial:"本地串口",TcpClient:"Tcp客户端",TcpServer:"Tcp服务端"};return t[e]||"未知"},parityFilter:function(e){return"N"===e?"无校验":"J"===e?"奇校验":"O"===e?"偶校验":"未知"}},data:function(){return{serialList:[],listLoading:!0,form:{},filterText:"",editVisible:!1,baudRateList:[],ParityList:[],InterfaceTypeList:[],addVisible:!1,InterfaceMap:[],activeNames:"11",Param:{},title:"",mode:""}},created:function(){this.getAllCommInterface(),this.InterfaceTypeList=[{id:"LocalSerial",text:"本地串口"},{id:"TcpClient",text:"Tcp客户端"}],this.baudRateList=[{id:"1200",text:"1200"},{id:"2400",text:"2400"},{id:"4800",text:"4800"},{id:"9600",text:"9600"},{id:"19200",text:"19200"},{id:"38400",text:"38400"},{id:"115200",text:"115200"}],this.parityList=[{id:"N",text:"无校验"},{id:"J",text:"奇校验"},{id:"O",text:"偶校验"}],this.dataBitsList=[{id:"5",text:"5位"},{id:"6",text:"6位"},{id:"7",text:"7位"},{id:"8",text:"8位"}],this.stopBitsList=[{id:"1",text:"1位"},{id:"1.5",text:"1.5"},{id:"2",text:"2位"}]},methods:{getSerialList:function(){this.listLoading=!0;var e=this,t="";t="./api/v1/serial/param",this.$axios({method:"get",url:t,headers:{token:this.$store.getters.token}}).then((function(t){var a=t.data;"0"===a.Code?(e.serialList=a.Data,e.listLoading=!1):"1"===a.Code?(e.$message.error(a.Message),e.listLoading=!1):"-1"===a.Code?(e.listLoading=!1,e.$message.error(a.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):(e.$message.error("返回未知错误，错误码："+a.Code),e.listLoading=!1)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t)),e.listLoading=!1}))},getAllCommInterface:function(){this.listLoading=!0;var e=this,t="";t="./api/v1/device/commInterface",this.$axios({method:"get",url:t,headers:{token:this.$store.getters.token}}).then((function(t){var a=t.data;"0"===a.Code?(e.InterfaceMap=a.Data.InterfaceMap,e.listLoading=!1):"1"===a.Code?(e.$message.error(a.Message),e.listLoading=!1):"-1"===a.Code?(e.listLoading=!1,e.$message.error(a.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):(e.$message.error("返回未知错误，错误码："+a.Code),e.listLoading=!1)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t)),e.listLoading=!1}))},selectSerial:function(e){},selectInterfaceType:function(e){"LocalSerial"===e&&this.getSerialList()},handleEdit:function(e,t){this.form=t,this.editVisible=!0},addCommInterface:function(){var e="";"LocalSerial"===this.form.InterfaceType&&(e="commSerialInterface"),"TcpClient"===this.form.InterfaceType&&(e="commTCPInterface");var t=this,a="";a="./api/v1/device/"+e;var r={};r.Name=this.form.CommInterfaceName,r.Type=this.form.InterfaceType,r.Param=this.Param,this.$axios({method:t.mode,url:a,data:r,headers:{token:this.$store.getters.token}}).then((function(e){var a=e.data;"0"===a.Code?(t.addVisible=!1,"post"===t.mode&&t.$message.success("添加通讯接口成功"),"put"===t.mode&&t.$message.success("修改通讯接口成功")):"1"===a.Code?t.$message.error(a.Message):"-1"===a.Code?(t.$message.error(a.Message),t.$store.dispatch("user/resetToken"),t.$router.push("/login?redirect=".concat(t.$route.fullPath))):t.$message.error("返回未知错误，错误码："+a.Code)})).catch((function(e){t.$message.error("出错了"+JSON.stringify(e))}))},editCommInterface:function(e){var t=this;this.form={},this.Param={},this.addVisible=!0,this.form=e,this.$set(t.form,"CommInterfaceName",e.Name),this.$set(t.form,"InterfaceType",e.Type),this.Param=e.Param,this.title="修改通讯接口",this.mode="put","LocalSerial"===e.Type&&this.getSerialList()},saveEditSerial:function(e,t){var a=this;this.$axios({method:"post",url:"./api/v1/serial/param",data:a.form,headers:{token:this.$store.getters.token}}).then((function(e){a.editVisible=!1,a.fetchData()})).catch((function(e){a.$message.error("出错了"+JSON.stringify(e))}))}}},i=s,o=(a("bb5c"),a("2877")),n=Object(o["a"])(i,r,l,!1,null,"6cab5362",null);t["default"]=n.exports},bb5c:function(e,t,a){"use strict";var r=a("98fe"),l=a.n(r);l.a}}]);