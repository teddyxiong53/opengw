(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa197cc6"],{3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"6b54":function(t,e,a){"use strict";a("3846");var r=a("cb7c"),s=a("0bfb"),l=a("9e1e"),i="toString",o=/./[i],n=function(t){a("2aba")(RegExp.prototype,i,t,!0)};a("79e5")((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?n((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!l&&t instanceof RegExp?s.call(t):void 0)})):o.name!=i&&n((function(){return o.call(this)}))},"97f9":function(t,e,a){"use strict";var r=a("ffb5"),s=a.n(r);s.a},"9adf":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:12,md:6}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:24,md:24}},[a("el-input",{staticStyle:{width:"100%","margin-right":"10px"},attrs:{placeholder:"输入通信接口名称过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1)],1)],1),t._v(" "),a("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:12,md:18}},[a("el-button",{staticStyle:{float:"right","margin-left":"5px"},attrs:{type:"primary"},on:{click:function(e){t.addVisible=!0,t.form={},t.Param={BaudRate:"9600",Parity:"N",DataBits:"8",StopBits:"1"},t.title="添加通讯接口",t.mode="post"}}},[t._v("添加")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.getAllCommInterface}},[t._v("刷新")])],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},t._l(t.filtedData,(function(e,r){return a("el-col",{key:r,staticStyle:{"margin-bottom":"10px"},attrs:{xs:24,sm:12,md:8}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(e.Name))]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.editCommInterface(e)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.deleteCommInterface(e)}}},[t._v("删除")])],1),t._v(" "),a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center"},attrs:{xs:12,sm:12,md:12}},[a("span",[t._v("接口类型：")])]),t._v(" "),a("el-col",{attrs:{xs:12,sm:12,md:12}},[a("el-tag",{attrs:{type:t._f("statusFilter")(e.Type)}},[t._v(t._s(t._f("interfaceTypeFilter")(e.Type)))])],1)],1),t._v(" "),a("el-collapse",{attrs:{accordion:""},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[e.Param?a("el-collapse-item",{attrs:{title:"详细参数",name:e.Name}},[e.Param&&"LocalSerial"==e.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("物理接口：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.Name))])])],1):t._e(),t._v(" "),e.Param&&"LocalSerial"==e.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("波特率：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.BaudRate))])])],1):t._e(),t._v(" "),e.Param&&"LocalSerial"==e.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("数据位：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.DataBits))])])],1):t._e(),t._v(" "),e.Param&&"LocalSerial"==e.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("校验位：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(t._f("parityFilter")(e.Param.Parity)))])])],1):t._e(),t._v(" "),e.Param&&"LocalSerial"==e.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("停止位：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.StopBits))])])],1):t._e(),t._v(" "),e.Param&&"LocalSerial"==e.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("命令间隔：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.Interval))])])],1):t._e(),t._v(" "),e.Param&&"LocalSerial"==e.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("超时时间：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.Timeout))])])],1):t._e(),t._v(" "),e.Param&&"TcpClient"==e.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("目标IP：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.IP))])])],1):t._e(),t._v(" "),e.Param&&"TcpClient"==e.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("目标端口：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.Port))])])],1):t._e(),t._v(" "),e.Param&&"TcpClient"==e.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("超时时间：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.Timeout))])])],1):t._e(),t._v(" "),e.Param&&"TcpClient"==e.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("通讯间隔：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.Interval))])])],1):t._e(),t._v(" "),e.Param&&"IoIn"==e.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("物理接口：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.Name))])])],1):t._e(),t._v(" "),e.Param&&"IoOut"==e.Type?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("物理接口：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.Name))])])],1):t._e()],1):t._e()],1)],1)],1)})),1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.addVisible,width:"30%"},on:{"update:visible":function(e){t.addVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"接口名称"}},[a("el-input",{model:{value:t.form.CommInterfaceName,callback:function(e){t.$set(t.form,"CommInterfaceName",e)},expression:"form.CommInterfaceName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"接口类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"接口类型"},model:{value:t.form.InterfaceType,callback:function(e){t.$set(t.form,"InterfaceType",e)},expression:"form.InterfaceType"}},t._l(t.InterfaceTypeList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.id}})})),1)],1),t._v(" "),"LocalSerial"==t.form.InterfaceType?a("el-form-item",{attrs:{label:"输入串口"}},[a("el-input",{attrs:{placeholder:"请输入串口"},model:{value:t.Param.Name,callback:function(e){t.$set(t.Param,"Name",e)},expression:"Param.Name"}})],1):t._e(),t._v(" "),"LocalSerial"==t.form.InterfaceType?a("el-form-item",{attrs:{label:"波特率"}},[a("el-select",{attrs:{placeholder:"波特率"},model:{value:t.Param.BaudRate,callback:function(e){t.$set(t.Param,"BaudRate",e)},expression:"Param.BaudRate"}},t._l(t.baudRateList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.id}})})),1)],1):t._e(),t._v(" "),"LocalSerial"==t.form.InterfaceType?a("el-form-item",{attrs:{label:"校验位"}},[a("el-select",{attrs:{placeholder:"校验位"},model:{value:t.Param.Parity,callback:function(e){t.$set(t.Param,"Parity",e)},expression:"Param.Parity"}},t._l(t.parityList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.id}})})),1)],1):t._e(),t._v(" "),"LocalSerial"==t.form.InterfaceType?a("el-form-item",{attrs:{label:"数据位"}},[a("el-select",{attrs:{placeholder:"数据位"},model:{value:t.Param.DataBits,callback:function(e){t.$set(t.Param,"DataBits",e)},expression:"Param.DataBits"}},t._l(t.dataBitsList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.id}})})),1)],1):t._e(),t._v(" "),"LocalSerial"==t.form.InterfaceType?a("el-form-item",{attrs:{label:"停止位"}},[a("el-select",{attrs:{placeholder:"停止位"},model:{value:t.Param.StopBits,callback:function(e){t.$set(t.Param,"StopBits",e)},expression:"Param.StopBits"}},t._l(t.stopBitsList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.id}})})),1)],1):t._e(),t._v(" "),"LocalSerial"==t.form.InterfaceType?a("el-form-item",{attrs:{label:"命令间隔"}},[a("el-input",{attrs:{type:"number"},model:{value:t.Param.Interval,callback:function(e){t.$set(t.Param,"Interval",e)},expression:"Param.Interval"}})],1):t._e(),t._v(" "),"LocalSerial"==t.form.InterfaceType?a("el-form-item",{attrs:{label:"通讯超时"}},[a("el-input",{attrs:{type:"number"},model:{value:t.Param.Timeout,callback:function(e){t.$set(t.Param,"Timeout",e)},expression:"Param.Timeout"}})],1):t._e(),t._v(" "),"TcpClient"==t.form.InterfaceType?a("el-form-item",{attrs:{label:"目的地址"}},[a("el-input",{model:{value:t.Param.IP,callback:function(e){t.$set(t.Param,"IP",e)},expression:"Param.IP"}})],1):t._e(),t._v(" "),"TcpClient"==t.form.InterfaceType?a("el-form-item",{attrs:{label:"目的端口"}},[a("el-input",{attrs:{type:"number"},model:{value:t.Param.Port,callback:function(e){t.$set(t.Param,"Port",e)},expression:"Param.Port"}})],1):t._e(),t._v(" "),"TcpServer"==t.form.InterfaceType?a("el-form-item",{attrs:{label:"本地端口"}},[a("el-input",{attrs:{type:"number"},model:{value:t.Param.localPort,callback:function(e){t.$set(t.Param,"localPort",e)},expression:"Param.localPort"}})],1):t._e(),t._v(" "),"TcpClient"==t.form.InterfaceType?a("el-form-item",{attrs:{label:"超时时间"}},[a("el-input",{attrs:{type:"number"},model:{value:t.Param.Timeout,callback:function(e){t.$set(t.Param,"Timeout",e)},expression:"Param.Timeout"}})],1):t._e(),t._v(" "),"TcpClient"==t.form.InterfaceType?a("el-form-item",{attrs:{label:"通讯间隔"}},[a("el-input",{attrs:{type:"number"},model:{value:t.Param.Interval,callback:function(e){t.$set(t.Param,"Interval",e)},expression:"Param.Interval"}})],1):t._e(),t._v(" "),"IoIn"==t.form.InterfaceType?a("el-form-item",{attrs:{label:"物理接口"}},[a("el-input",{model:{value:t.Param.Name,callback:function(e){t.$set(t.Param,"Name",e)},expression:"Param.Name"}})],1):t._e(),t._v(" "),"IoOut"==t.form.InterfaceType?a("el-form-item",{attrs:{label:"物理接口"}},[a("el-input",{model:{value:t.Param.Name,callback:function(e){t.$set(t.Param,"Name",e)},expression:"Param.Name"}})],1):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addVisible=!1,t.form={}}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addCommInterface}},[t._v("确 定")])],1)],1)],1)},s=[],l=(a("6b54"),{filters:{statusFilter:function(t){var e={LocalSerial:"success",TcpClient:"gray",IoIn:"warning",IoOut:"danger",TcpServer:"danger"};return e[t]||"info"},interfaceTypeFilter:function(t){var e={LocalSerial:"本地串口",TcpClient:"Tcp客户端",IoIn:"开关量输入",IoOut:"开关量输出",TcpServer:"Tcp服务端"};return e[t]||"未知"},parityFilter:function(t){return"N"===t?"无校验":"O"===t?"奇校验":"E"===t?"偶校验":"未知"}},data:function(){return{serialList:[],listLoading:!0,form:{},filterText:"",editVisible:!1,baudRateList:[],ParityList:[],InterfaceTypeList:[],addVisible:!1,InterfaceMap:[],activeNames:"11",Param:{},title:"",mode:""}},computed:{filtedData:function(){var t=this;return this.InterfaceMap.filter((function(e){if(e.Name.toString().indexOf(t.filterText)>-1)return e}))}},created:function(){this.getAllCommInterface(),this.InterfaceTypeList=[{id:"LocalSerial",text:"本地串口"},{id:"TcpClient",text:"Tcp客户端"},{id:"IoIn",text:"开关量输入"},{id:"IoOut",text:"开关量输出"}],this.baudRateList=[{id:"1200",text:"1200"},{id:"2400",text:"2400"},{id:"4800",text:"4800"},{id:"9600",text:"9600"},{id:"19200",text:"19200"},{id:"38400",text:"38400"},{id:"115200",text:"115200"}],this.parityList=[{id:"N",text:"无校验"},{id:"O",text:"奇校验"},{id:"E",text:"偶校验"}],this.dataBitsList=[{id:"5",text:"5位"},{id:"6",text:"6位"},{id:"7",text:"7位"},{id:"8",text:"8位"}],this.stopBitsList=[{id:"1",text:"1位"},{id:"1.5",text:"1.5"},{id:"2",text:"2位"}]},methods:{getSerialList:function(){this.listLoading=!0;var t=this,e="";e="./api/v1/serial/param",this.$axios({method:"get",url:e,headers:{token:this.$store.getters.token}}).then((function(e){var a=e.data;"0"===a.Code?(t.serialList=a.Data,t.listLoading=!1):"1"===a.Code?(t.$message.error(a.Message),t.listLoading=!1):"-1"===a.Code?(t.listLoading=!1,t.$message.error(a.Message),t.$store.dispatch("user/resetToken"),t.$router.push("/login?redirect=".concat(t.$route.fullPath))):(t.$message.error("返回未知错误，错误码："+a.Code),t.listLoading=!1)})).catch((function(e){t.$message.error("出错了"+JSON.stringify(e)),t.listLoading=!1}))},getAllCommInterface:function(){this.listLoading=!0;var t=this,e="";e="./api/v1/device/commInterface",this.$axios({method:"get",url:e,headers:{token:this.$store.getters.token}}).then((function(e){var a=e.data;"0"===a.Code?(t.InterfaceMap=a.Data.InterfaceMap,t.listLoading=!1):"1"===a.Code?(t.$message.error(a.Message),t.listLoading=!1):"-1"===a.Code?(t.listLoading=!1,t.$message.error(a.Message),t.$store.dispatch("user/resetToken"),t.$router.push("/login?redirect=".concat(t.$route.fullPath))):(t.$message.error("返回未知错误，错误码："+a.Code),t.listLoading=!1)})).catch((function(e){t.$message.error("出错了"+JSON.stringify(e)),t.listLoading=!1}))},selectSerial:function(t){},selectInterfaceType:function(t){console.log(t)},handleEdit:function(t,e){this.form=e,this.editVisible=!0},addCommInterface:function(){var t=this,e="commInterface",a={};a.Name=this.form.CommInterfaceName,a.Type=this.form.InterfaceType,"LocalSerial"===this.form.InterfaceType&&(a.Param={Name:t.Param.Name,BaudRate:t.Param.BaudRate,Parity:t.Param.Parity,DataBits:t.Param.DataBits,StopBits:t.Param.StopBits,Timeout:t.Param.Timeout,Interval:t.Param.Interval}),"TcpClient"===this.form.InterfaceType&&(a.Param={IP:t.Param.IP,Port:t.Param.Port,Timeout:t.Param.Timeout,Interval:t.Param.Interval}),"IoIn"!==this.form.InterfaceType&&"IoOut"!==this.form.InterfaceType||(a.Param={Name:t.Param.Name});var r="";r="./api/v1/device/"+e,this.$axios({method:t.mode,url:r,data:a,headers:{token:this.$store.getters.token}}).then((function(e){var a=e.data;"0"===a.Code?(t.addVisible=!1,"post"===t.mode&&(t.$message.success("添加通讯接口成功"),t.getAllCommInterface()),"put"===t.mode&&(t.$message.success("修改通讯接口成功"),t.getAllCommInterface())):"1"===a.Code?t.$message.error(a.Message):"-1"===a.Code?(t.$message.error(a.Message),t.$store.dispatch("user/resetToken"),t.$router.push("/login?redirect=".concat(t.$route.fullPath))):t.$message.error("返回未知错误，错误码："+a.Code)})).catch((function(e){t.$message.error("出错了"+JSON.stringify(e))}))},editCommInterface:function(t){var e=this;this.form={},this.Param={},this.addVisible=!0,this.form=t,this.$set(e.form,"CommInterfaceName",t.Name),this.$set(e.form,"InterfaceType",t.Type),this.Param=t.Param,this.title="修改通讯接口",this.mode="put","LocalSerial"===t.Type&&this.getSerialList()},deleteCommInterface:function(t){var e=this,a=this;this.$messageBox.confirm("你确定要删除通讯接口吗？<br /><h3>"+t.Name+"</h3>","删除通讯接口",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0,dangerouslyUseHTMLString:!0,type:"info"}).then((function(r){if("confirm"===r){e.form={},e.Param={},e.form=t,e.$set(a.form,"CommInterfaceName",t.Name),e.$set(a.form,"InterfaceType",t.Type),e.Param=t.Param,e.mode="delete";var s="commInterface",l="";l="./api/v1/device/"+s;var i={};i.commInterface=e.form.CommInterfaceName,e.$axios({method:a.mode,url:l,params:i,headers:{token:e.$store.getters.token}}).then((function(t){var e=t.data;"0"===e.Code?(a.addVisible=!1,"post"===a.mode&&(a.$message.success("添加通讯接口成功"),a.getAllCommInterface()),"put"===a.mode&&(a.$message.success("修改通讯接口成功"),a.getAllCommInterface()),"delete"===a.mode&&(a.$message.success("删除通讯接口成功"),a.getAllCommInterface())):"1"===e.Code?a.$message.error(e.Message):"-1"===e.Code?(a.$message.error(e.Message),a.$store.dispatch("user/resetToken"),a.$router.push("/login?redirect=".concat(a.$route.fullPath))):a.$message.error("返回未知错误，错误码："+e.Code)})).catch((function(t){a.$message.error("出错了"+JSON.stringify(t))}))}})).catch((function(t){"cancel"===t&&console.log("cancel")}))},saveEditSerial:function(t,e){var a=this;this.$axios({method:"post",url:"./api/v1/serial/param",data:a.form,headers:{token:this.$store.getters.token}}).then((function(t){a.editVisible=!1,a.fetchData()})).catch((function(t){a.$message.error("出错了"+JSON.stringify(t))}))}}}),i=l,o=(a("97f9"),a("2877")),n=Object(o["a"])(i,r,s,!1,null,"4331a878",null);e["default"]=n.exports},ffb5:function(t,e,a){}}]);