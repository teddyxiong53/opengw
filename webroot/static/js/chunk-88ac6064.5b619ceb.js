(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-88ac6064"],{3846:function(e,t,r){r("9e1e")&&"g"!=/./g.flags&&r("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:r("0bfb")})},"3d3b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:12,md:6}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{xs:24,sm:24,md:24}},[r("el-input",{staticStyle:{width:"100%","margin-right":"10px"},attrs:{placeholder:"输入上报服务名称过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1)],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:12,md:18}},[r("el-button",{staticStyle:{float:"right","margin-left":"5px"},attrs:{type:"primary"},on:{click:function(t){e.addVisible=!0,e.form={},e.Param={},e.title="添加上报服务",e.mode="post"}}},[e._v("添加")]),e._v(" "),r("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.getReportDeviceList}},[e._v("刷新")])],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},e._l(e.filtedData,(function(t,a){return r("el-col",{key:a,staticStyle:{"margin-bottom":"10px"},attrs:{xs:24,sm:12,md:8}},[r("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v(e._s(t.ServiceName))]),e._v(" "),r("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(r){return e.handelGetDeviceListByReportService(t)}}},[e._v("上报结点")]),e._v(" "),r("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(r){return e.editReportService(t)}}},[e._v("修改")]),e._v(" "),r("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(r){return e.deleteReportService(t)}}},[e._v("删除")])],1),e._v(" "),r("el-row",{staticClass:"text item"},[r("el-col",{staticStyle:{"align-self":"center"},attrs:{xs:8,sm:8,md:8}},[r("span",[e._v("协议类型：")])]),e._v(" "),r("el-col",{attrs:{xs:16,sm:16,md:16}},[r("el-tag",{attrs:{type:e._f("statusFilter")(t.Protocol)}},[e._v(e._s(e._f("ProtocolFilter")(t.Protocol)))])],1)],1),e._v(" "),r("el-row",{staticClass:"text item"},[r("el-col",{staticStyle:{"align-self":"center"},attrs:{xs:8,sm:8,md:8}},[r("span",[e._v("上报地址：")])]),e._v(" "),r("el-col",{attrs:{xs:16,sm:16,md:16}},[r("span",[e._v(e._s(t.IP))])])],1),e._v(" "),r("el-row",{staticClass:"text item"},[r("el-col",{staticStyle:{"align-self":"center"},attrs:{xs:8,sm:8,md:8}},[r("span",[e._v("上报端口：")])]),e._v(" "),r("el-col",{attrs:{xs:16,sm:16,md:16}},[r("span",[e._v(e._s(t.Port))])])],1),e._v(" "),r("el-row",{staticClass:"text item"},[r("el-col",{staticStyle:{"align-self":"center"},attrs:{xs:8,sm:8,md:8}},[r("span",[e._v("上报周期：")])]),e._v(" "),r("el-col",{attrs:{xs:16,sm:16,md:16}},[r("span",[e._v(e._s(t.ReportTime))])])],1),e._v(" "),r("el-collapse",{attrs:{accordion:""},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t.Param?r("el-collapse-item",{attrs:{title:"详细参数",name:t.ServiceName}},[t.Param&&"Aliyun.MQTT"==t.Protocol?r("el-row",{staticClass:"text item"},[r("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[r("span",[e._v("产品秘钥：")])]),e._v(" "),r("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[r("span",[e._v(e._s(t.Param.ProductKey))])])],1):e._e(),e._v(" "),t.Param&&"Aliyun.MQTT"==t.Protocol?r("el-row",{staticClass:"text item"},[r("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[r("span",[e._v("设备名称：")])]),e._v(" "),r("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[r("span",[e._v(e._s(t.Param.DeviceName))])])],1):e._e(),e._v(" "),t.Param&&"Aliyun.MQTT"==t.Protocol?r("el-row",{staticClass:"text item"},[r("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[r("span",[e._v("设备秘钥：")])]),e._v(" "),r("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[r("span",[e._v(e._s(t.Param.DeviceSecret))])])],1):e._e(),e._v(" "),t.Param&&"EMQX.MQTT"==t.Protocol?r("el-row",{staticClass:"text item"},[r("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[r("span",[e._v("客户端ID：")])]),e._v(" "),r("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[r("span",[e._v(e._s(t.Param.ClientID))])])],1):e._e(),e._v(" "),t.Param&&"EMQX.MQTT"==t.Protocol?r("el-row",{staticClass:"text item"},[r("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[r("span",[e._v("用户名：")])]),e._v(" "),r("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[r("span",[e._v(e._s(t.Param.UserName))])])],1):e._e(),e._v(" "),t.Param&&"EMQX.MQTT"==t.Protocol?r("el-row",{staticClass:"text item"},[r("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[r("span",[e._v("密码：")])]),e._v(" "),r("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[r("el-tooltip",{staticStyle:{margin:"4px"},attrs:{effect:"dark",content:t.Param.Password,placement:"top-start"}},[r("span",[e._v(e._s(t.Param.Password))])])],1)],1):e._e(),e._v(" "),t.Param&&"Huawei.MQTT"==t.Protocol?r("el-row",{staticClass:"text item"},[r("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[r("span",[e._v("设备ID：")])]),e._v(" "),r("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[r("span",[e._v(e._s(t.Param.DeviceID))])])],1):e._e(),e._v(" "),t.Param&&"Huawei.MQTT"==t.Protocol?r("el-row",{staticClass:"text item"},[r("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[r("span",[e._v("密钥：")])]),e._v(" "),r("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[r("span",[e._v(e._s(t.Param.DeviceSecret))])])],1):e._e()],1):e._e()],1)],1)],1)})),1),e._v(" "),r("el-dialog",{attrs:{title:e.title,visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"服务名称"}},[r("el-input",{model:{value:e.form.ServiceName,callback:function(t){e.$set(e.form,"ServiceName",t)},expression:"form.ServiceName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"上报地址"}},[r("el-input",{model:{value:e.form.IP,callback:function(t){e.$set(e.form,"IP",t)},expression:"form.IP"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"上报端口"}},[r("el-input",{attrs:{type:"number"},model:{value:e.form.Port,callback:function(t){e.$set(e.form,"Port",t)},expression:"form.Port"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"上报周期"}},[r("el-input",{attrs:{type:"number"},model:{value:e.form.ReportTime,callback:function(t){e.$set(e.form,"ReportTime",e._n(t))},expression:"form.ReportTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"协议类型"}},[r("el-select",{attrs:{clearable:"",placeholder:"协议类型"},model:{value:e.form.Protocol,callback:function(t){e.$set(e.form,"Protocol",t)},expression:"form.Protocol"}},e._l(e.ProtocolList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.text,value:e.id}})})),1)],1),e._v(" "),"Aliyun.MQTT"==e.form.Protocol?r("el-form-item",{attrs:{label:"输入产品秘钥"}},[r("el-input",{attrs:{placeholder:"请输入ProductKey"},model:{value:e.Param.ProductKey,callback:function(t){e.$set(e.Param,"ProductKey",t)},expression:"Param.ProductKey"}})],1):e._e(),e._v(" "),"Aliyun.MQTT"==e.form.Protocol?r("el-form-item",{attrs:{label:"输入设备名称"}},[r("el-input",{attrs:{placeholder:"请输入DeviceName"},model:{value:e.Param.DeviceName,callback:function(t){e.$set(e.Param,"DeviceName",t)},expression:"Param.DeviceName"}})],1):e._e(),e._v(" "),"Aliyun.MQTT"==e.form.Protocol?r("el-form-item",{attrs:{label:"输入设备秘钥"}},[r("el-input",{attrs:{placeholder:"请输入DeviceSecret"},model:{value:e.Param.DeviceSecret,callback:function(t){e.$set(e.Param,"DeviceSecret",t)},expression:"Param.DeviceSecret"}})],1):e._e(),e._v(" "),"Huawei.MQTT"==e.form.Protocol?r("el-form-item",{attrs:{label:"输入设备ID"}},[r("el-input",{attrs:{placeholder:"请输入DeviceID"},model:{value:e.Param.DeviceID,callback:function(t){e.$set(e.Param,"DeviceID",t)},expression:"Param.DeviceID"}})],1):e._e(),e._v(" "),"Huawei.MQTT"==e.form.Protocol?r("el-form-item",{attrs:{label:"输入密钥"}},[r("el-input",{attrs:{placeholder:"请输入DeviceSecret"},model:{value:e.Param.DeviceSecret,callback:function(t){e.$set(e.Param,"DeviceSecret",t)},expression:"Param.DeviceSecret"}})],1):e._e(),e._v(" "),"EMQX.MQTT"==e.form.Protocol?r("el-form-item",{attrs:{label:"客户端id"}},[r("el-input",{attrs:{placeholder:"请输入客户端id"},model:{value:e.Param.ClientID,callback:function(t){e.$set(e.Param,"ClientID",t)},expression:"Param.ClientID"}})],1):e._e(),e._v(" "),"EMQX.MQTT"==e.form.Protocol?r("el-form-item",{attrs:{label:"输入用户名"}},[r("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.Param.UserName,callback:function(t){e.$set(e.Param,"UserName",t)},expression:"Param.UserName"}})],1):e._e(),e._v(" "),"EMQX.MQTT"==e.form.Protocol?r("el-form-item",{attrs:{label:"输入用户密码"}},[r("el-input",{attrs:{placeholder:"请输入用户密码"},model:{value:e.Param.Password,callback:function(t){e.$set(e.Param,"Password",t)},expression:"Param.Password"}})],1):e._e()],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addVisible=!1,e.form={}}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.operatorReportService}},[e._v("确 定")])],1)],1)],1)},o=[],s=(r("6b54"),{filters:{statusFilter:function(e){var t={"Aliyun.MQTT":"success","EMQX.MQTT":"gray",TcpServer:"danger","Huawei.MQTT":"warning"};return t[e]||"info"},ProtocolFilter:function(e){var t={"Aliyun.MQTT":"阿里云mqtt服务","EMQX.MQTT":"EMQX(mqtt)服务",TcpServer:"Tcp服务端","Huawei.MQTT":"华为云mqtt服务"};return t[e]||"未知"},parityFilter:function(e){return"N"===e?"无校验":"J"===e?"奇校验":"O"===e?"偶校验":"未知"}},data:function(){return{serialList:[],listLoading:!0,form:{},filterText:"",editVisible:!1,baudRateList:[],ParityList:[],ProtocolList:[],addVisible:!1,reportSeviceMap:[],activeNames:"11",Param:{},title:"",mode:""}},computed:{filtedData:function(){var e=this;return this.reportSeviceMap.filter((function(t){if(t.ServiceName.toString().indexOf(e.filterText)>-1)return t}))}},created:function(){this.getReportDeviceList(),this.ProtocolList=[{id:"Aliyun.MQTT",text:"阿里云mqtt服务"},{id:"EMQX.MQTT",text:"EMQX服务"},{id:"Huawei.MQTT",text:"华为云mqtt服务"}]},methods:{getReportDeviceList:function(){var e=this,t="";t="./api/v1/report/param",this.$axios({method:"get",url:t,headers:{token:this.$store.getters.token}}).then((function(t){var r=t.data;"0"===r.Code?(e.reportSeviceMap=r.Data,e.$message.success("获取上报服务列表成功")):"1"===r.Code?e.$message.error(r.Message):"-1"===r.Code?(e.$message.error(r.Message),e.$store.dispatch("user/resetToken"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))):e.$message.error("返回未知错误，错误码："+r.Code)})).catch((function(t){e.$message.error("出错了"+JSON.stringify(t))}))},selectProtocol:function(e){console.log(e)},handleEdit:function(e,t){this.form=t,this.editVisible=!0},operatorReportService:function(){var e="",t={};if("Aliyun.MQTT"===this.form.Protocol&&"post"===this.mode)e="param",t.ServiceName=this.form.ServiceName,t.IP=this.form.IP,t.Port=this.form.Port.toString(),t.ReportTime=this.form.ReportTime,t.Protocol=this.form.Protocol,t.Param=this.Param;else if("Huawei.MQTT"===this.form.Protocol&&"post"===this.mode)e="param",t.ServiceName=this.form.ServiceName,t.IP=this.form.IP,t.Port=this.form.Port.toString(),t.ReportTime=this.form.ReportTime,t.Protocol=this.form.Protocol,t.Param=this.Param;else if("EMQX.MQTT"===this.form.Protocol&&"post"===this.mode)e="param",t.ServiceName=this.form.ServiceName,t.IP=this.form.IP,t.Port=this.form.Port.toString(),t.ReportTime=this.form.ReportTime,t.Protocol=this.form.Protocol,t.Param=this.Param;else if("Aliyun.MQTT"===this.form.Protocol&&"delete"===this.mode)e="param",t.ServiceName=this.form.ServiceName;else if("Huawei.MQTT"===this.form.Protocol&&"delete"===this.mode)e="param",t.ServiceName=this.form.ServiceName;else{if("EMQX.MQTT"!==this.form.Protocol||"delete"!==this.mode)return void this.$message.error("协议或者请求模式错误");e="param",t.ServiceName=this.form.ServiceName}var r=this,a="";a="./api/v1/report/"+e,this.$axios({method:r.mode,url:a,data:t,headers:{token:this.$store.getters.token}}).then((function(e){var t=e.data;"0"===t.Code?(r.addVisible=!1,"post"===r.mode&&(r.$message.success("添加(修改)上报服务成功"),r.getReportDeviceList()),"delete"===r.mode&&(r.$message.success("删除上报服务成功"),r.getReportDeviceList())):"1"===t.Code?r.$message.error(t.Message):"-1"===t.Code?(r.$message.error(t.Message),r.$store.dispatch("user/resetToken"),r.$router.push("/login?redirect=".concat(r.$route.fullPath))):r.$message.error("返回未知错误，错误码："+t.Code)})).catch((function(e){r.$message.error("出错了"+JSON.stringify(e))}))},handelGetDeviceListByReportService:function(e){this.$router.push({name:"reportDeviceManager",params:{ServiceName:e.ServiceName,Protocol:e.Protocol}})},editReportService:function(e){var t=this;this.form={},this.Param={},this.addVisible=!0,this.form=e,this.$set(t.form,"ServiceName",e.ServiceName),this.$set(t.form,"Protocol",e.Protocol),this.Param=e.Param,this.title="修改上报服务",this.mode="post"},deleteReportService:function(e){var t=this,r=this;this.$messageBox.confirm("你确定要删除上报服务吗？<br /><h3>"+e.ServiceName+"</h3>","删除上报",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0,dangerouslyUseHTMLString:!0,type:"info"}).then((function(a){"confirm"===a&&(t.form={},t.Param={},t.form=e,t.$set(r.form,"ServiceName",e.ServiceName),t.$set(r.form,"Protocol",e.Protocol),t.Param=e.Param,t.mode="delete",r.operatorReportService())})).catch((function(e){"cancel"===e&&console.log("cancel")}))}}}),i=s,l=(r("b774"),r("2877")),c=Object(l["a"])(i,a,o,!1,null,"419bb36e",null);t["default"]=c.exports},"5bc1":function(e,t,r){},"6b54":function(e,t,r){"use strict";r("3846");var a=r("cb7c"),o=r("0bfb"),s=r("9e1e"),i="toString",l=/./[i],c=function(e){r("2aba")(RegExp.prototype,i,e,!0)};r("79e5")((function(){return"/a/b"!=l.call({source:"a",flags:"b"})}))?c((function(){var e=a(this);return"/".concat(e.source,"/","flags"in e?e.flags:!s&&e instanceof RegExp?o.call(e):void 0)})):l.name!=i&&c((function(){return l.call(this)}))},b774:function(e,t,r){"use strict";var a=r("5bc1"),o=r.n(a);o.a}}]);